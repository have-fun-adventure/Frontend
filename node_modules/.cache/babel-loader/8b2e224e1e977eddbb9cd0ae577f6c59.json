{"ast":null,"code":"import _objectSpread from \"/Users/aishahalmaghrbi/code/wdi/projects/have-fun-adventure/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/aishahalmaghrbi/code/wdi/projects/have-fun-adventure/Frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/aishahalmaghrbi/code/wdi/projects/have-fun-adventure/Frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/aishahalmaghrbi/code/wdi/projects/have-fun-adventure/Frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/aishahalmaghrbi/code/wdi/projects/have-fun-adventure/Frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/aishahalmaghrbi/code/wdi/projects/have-fun-adventure/Frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/aishahalmaghrbi/code/wdi/projects/have-fun-adventure/Frontend/src/components/AuthForm.js\";\nimport React, { Component } from \"react\";\nimport Input from \"./Input\";\nimport Login from \"./Login\";\nimport Signup from \"./Signup\";\nimport { setJwt } from \"../services/auth\";\n\nvar AuthForm =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AuthForm, _Component);\n\n  function AuthForm() {\n    var _this;\n\n    _classCallCheck(this, AuthForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AuthForm).call(this));\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n\n      _this.handleRequest(_this.state.data);\n    };\n\n    _this.handleChange = function (_ref) {\n      var input = _ref.currentTarget;\n      console.log(\" handiling changes \", input);\n\n      var data = _objectSpread({}, _this.state.data);\n\n      data[input.name] = input.value;\n\n      _this.setState({\n        data: data\n      });\n    };\n\n    _this.handleChange = function (_ref2) {\n      var input = _ref2.currentTarget;\n      console.log(\" handiling changes \", input);\n\n      var data = _objectSpread({}, _this.state.data);\n\n      data[input.name] = input.value;\n\n      _this.setState({\n        data: data\n      });\n    };\n\n    _this.renderInput = function (name, lable) {\n      var type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"text\";\n      var data = _this.state.data; // const data = this.state.data\n\n      return React.createElement(Input, {\n        name: name,\n        lable: lable,\n        type: type,\n        value: data[name],\n        onChange: _this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      });\n    };\n\n    _this.state = {\n      data: {\n        email: \"\",\n        password: \"\",\n        username: \"\",\n        firstname: \"\",\n        lastname: \"\",\n        phone: \"\",\n        gender: \"\",\n        location: \"\"\n      }\n    };\n    return _this;\n  }\n\n  _createClass(AuthForm, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      console.log(\"gggggggg \\n\\n\\n\\n\\n\", this.props);\n\n      if (this.props.userInfo) {\n        console.log(\"printing user infor \", this.props.userInfo);\n        this.setState({}); // username: this.props.userInfo != null ? this.props.userInfo.username : '',\n        // firstname: this.props.userInfo != null ? this.props.userInfo.firstname : '',\n        // lastname: this.props.userInfo != null ? this.props.userInfo.lastname : '',\n        // phone: this.props.userInfo != null ? this.props.userInfo.phone : '',\n        // gender: this.props.userInfo != null ? this.props.userInfo.gender : '',\n        // location: this.props.userInfo != null ? this.props.userInfo.location : '',\n        // id: this.props.userInfo != null ? this.props.userInfo.id : null\n      }\n    }\n  }, {\n    key: \"handleRequest\",\n    value: function handleRequest(user) {\n      var _this2 = this;\n\n      var apiUrl = \"http://localhost:3001/auth\";\n      apiUrl += this.props.form === \"signup\" ? \"/signup\" : \"/\";\n      console.log(apiUrl);\n      fetch(apiUrl, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(user)\n      }).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        console.log(data);\n        setJwt(data.token);\n\n        _this2.props.onLogin();\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"p-5 bt-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, this.props.form === \"signup\" ? React.createElement(Signup, {\n        renderInput: this.renderInput,\n        handleSubmit: this.handleSubmit,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }) : React.createElement(Login, {\n        renderInput: this.renderInput,\n        handleSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return AuthForm;\n}(Component);\n\nexport default AuthForm;","map":{"version":3,"sources":["/Users/aishahalmaghrbi/code/wdi/projects/have-fun-adventure/Frontend/src/components/AuthForm.js"],"names":["React","Component","Input","Login","Signup","setJwt","AuthForm","handleSubmit","e","preventDefault","handleRequest","state","data","handleChange","input","currentTarget","console","log","name","value","setState","renderInput","lable","type","email","password","username","firstname","lastname","phone","gender","location","props","userInfo","user","apiUrl","form","fetch","method","headers","body","JSON","stringify","then","response","json","token","onLogin","catch","error"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Input from \"./Input\";\nimport Login from \"./Login\";\nimport Signup from \"./Signup\";\nimport { setJwt } from \"../services/auth\";\nclass AuthForm extends Component {\n  constructor() {\n    super();\n    this.state = {\n      data: {\n        email: \"\",\n        password: \"\",\n        username: \"\",\n        firstname: \"\",\n        lastname: \"\",\n        phone: \"\",\n        gender: \"\",\n        location: \"\"\n\n      }\n    };\n  }\n\n  componentDidMount() {\n    console.log(\"gggggggg \\n\\n\\n\\n\\n\", this.props)\n\n    if (this.props.userInfo) {\n\n      console.log(\"printing user infor \", this.props.userInfo)\n      this.setState({})\n      // username: this.props.userInfo != null ? this.props.userInfo.username : '',\n      // firstname: this.props.userInfo != null ? this.props.userInfo.firstname : '',\n      // lastname: this.props.userInfo != null ? this.props.userInfo.lastname : '',\n      // phone: this.props.userInfo != null ? this.props.userInfo.phone : '',\n      // gender: this.props.userInfo != null ? this.props.userInfo.gender : '',\n      // location: this.props.userInfo != null ? this.props.userInfo.location : '',\n      // id: this.props.userInfo != null ? this.props.userInfo.id : null\n    }\n  }\n\n  handleRequest(user) {\n    let apiUrl = \"http://localhost:3001/auth\";\n\n    apiUrl += this.props.form === \"signup\" ? \"/signup\" : \"/\";\n    console.log(apiUrl);\n\n    fetch(apiUrl, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(user)\n    })\n      .then(response => response.json())\n      .then(data => {\n        console.log(data);\n        setJwt(data.token);\n        this.props.onLogin();\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  }\n  handleSubmit = e => {\n    e.preventDefault();\n    this.handleRequest(this.state.data);\n  };\n  handleChange = ({ currentTarget: input }) => {\n    console.log(\" handiling changes \", input)\n    const data = { ...this.state.data };\n    data[input.name] = input.value;\n    this.setState({ data });\n  };\n\n  handleChange = ({ currentTarget: input }) => {\n    console.log(\" handiling changes \", input)\n    const data = { ...this.state.data };\n    data[input.name] = input.value;\n    this.setState({ data });\n  };\n\n  renderInput = (name, lable, type = \"text\") => {\n    const { data } = this.state;\n    // const data = this.state.data\n\n    return (\n      <Input\n        name={name}\n        lable={lable}\n        type={type}\n        value={data[name]}\n        onChange={this.handleChange}\n      />\n    );\n  };\n  render() {\n    return (\n      <div className=\"p-5 bt-5\">\n        {this.props.form === \"signup\" ? (\n          <Signup\n            renderInput={this.renderInput}\n            handleSubmit={this.handleSubmit}\n            onChange={this.handleChange}\n          />\n        ) : (\n            <Login\n              renderInput={this.renderInput}\n              handleSubmit={this.handleSubmit}\n            />\n          )}\n      </div>\n    );\n  }\n}\n\nexport default AuthForm;"]},"metadata":{},"sourceType":"module"}